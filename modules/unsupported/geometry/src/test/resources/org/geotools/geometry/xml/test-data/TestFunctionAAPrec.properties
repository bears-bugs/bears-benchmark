# the following tests are meant to be run with a precision model nearing ordinates to
# the closest round number, but we are using floats, so some expected results need to be
# overwritten
AA_-_sliver_triangle,_cut_by_polygon=intersection|POLYGON ((90 10.11111111111111, 100 10, 90 10, 90 10.11111111111111))|union|POLYGON ((90 10, 10 10, 10 11, 90 10.11111111111111, 90 200, 200 200, 200 0, 90 0, 90 10))|difference|skipped|symdifference|MULTIPOLYGON (((90 10, 10 10, 10 11, 90 10.11111111111111, 90 10)), ((90 10, 100 10, 90 10.11111111111111, 90 200, 200 200, 200 0, 90 0, 90 10)))
AA_-_polygon_with_outward_sliver,_cut_by_polygon=intersection|POLYGON ((20 10, 10 10, 20 10.125, 20 10))
AA_-_narrow_wedge_in_polygon=intersection|POLYGON ((50 40, 50 20, 40 20, 40 30, 49 30, 40 30.23076923076923, 40 40, 50 40))|union|POLYGON ((50 20, 50 10, 10 10, 10 30, 40 30, 40 30.23076923076923, 10 31, 10 50, 50 50, 50 40, 60 40, 60 20, 50 20))|difference|skipped|symdifference|MULTIPOLYGON (((50 20, 50 10, 10 10, 10 30, 40 30, 40 20, 50 20)), ((50 20, 50 40, 60 40, 60 20, 50 20)), ((40 30.23076923076923, 10 31, 10 50, 50 50, 50 40, 40 40, 40 30.23076923076923)), ((40 30.23076923076923, 49 30, 40 30, 40 30.23076923076923)))
AA_-_hole_close_to_shell=intersection|MULTIPOLYGON (((10 10, 10 30, 10.25 30, 10 10)), ((30 10, 10 10, 30 10.25, 30 10)))|union|POLYGON ((10 30, 10 100, 100 100, 100 10, 30 10, 30 0, 0 0, 0 30, 10 30), (90 90, 11 90, 10.25 30, 30 30, 30 10.25, 90 11, 90 90))|difference|skipped|symdifference|MULTIPOLYGON (((10 30, 10 100, 100 100, 100 10, 30 10, 30 10.25, 90 11, 90 90, 11 90, 10.25 30, 10 30)), ((10 30, 10 10, 30 10, 30 0, 0 0, 0 30, 10 30)), ((10 10, 10.25 30, 30 30, 30 10.25, 10 10)))
mAA_-_shells_close_together=intersection|MULTIPOLYGON (((100 20, 100 10, 90 10, 90 20, 100 20)), ((100 20, 90 20.1, 90 30, 100 30, 100 20)))|union|POLYGON ((100 10, 100 0, 0 0, 0 20, 90 20, 90 20.1, 0 21, 0 40, 100 40, 100 30, 110 30, 110 10, 100 10))|difference|skipped|symdifference|MULTIPOLYGON (((100 10, 100 0, 0 0, 0 20, 90 20, 90 10, 100 10)), ((100 10, 100 20, 100 30, 110 30, 110 10, 100 10)), ((100 20, 90 20, 90 20.1, 100 20)), ((90 20.1, 0 21, 0 40, 100 40, 100 30, 90 30, 90 20.1)))
AA_-_A_sliver_triangle_cutting_all_the_way_across_B=intersection|POLYGON ((20 10, 0 10, 20 10.2, 20 10))|union|POLYGON ((100 10, 20 10, 20 0, 0 0, 0 10, 0 20, 20 20, 20 10.2, 100 11, 100 10))|difference|skipped|symdifference|MULTIPOLYGON (((100 10, 20 10, 20 10.2, 100 11, 100 10)), ((0 10, 20 10, 20 0, 0 0, 0 10)), ((20 10.2, 0 10, 0 20, 20 20, 20 10.2)))
AA_-_A_polygon_with_sliver_cutting_all_the_way_across_B=intersection|POLYGON ((20 10, 0 10, 20 10.222222222222221, 20 10))|union|POLYGON ((100 10, 20 10, 20 0, 0 0, 0 10, 0 20, 20 20, 20 10.222222222222221, 90 11, 90 20, 100 20, 100 10))|difference|skipped|symdifference|MULTIPOLYGON (((100 10, 20 10, 20 10.222222222222221, 90 11, 90 20, 100 20, 100 10)), ((0 10, 20 10, 20 0, 0 0, 0 10)), ((20 10.222222222222221, 0 10, 0 20, 20 20, 20 10.222222222222221)))
AA_-_hole_close_to_shell,_B_coincident_with_A=intersection|MULTIPOLYGON (((10 10, 10 30, 10.25 30, 10 10)), ((30 10, 10 10, 30 10.25, 30 10)))|union|POLYGON ((10 30, 10 100, 100 100, 100 10, 30 10, 10 0, 10 10, 10 30), (90 90, 11 90, 10.25 30, 30 30, 30 10.25, 90 11, 90 90))|difference|skipped|symdifference|MULTIPOLYGON (((10 30, 10 100, 100 100, 100 10, 30 10, 30 10.25, 90 11, 90 90, 11 90, 10.25 30, 10 30)), ((10 10, 30 10, 10 0, 10 10)), ((10 10, 10.25 30, 30 30, 30 10.25, 10 10)))
AA_-_A_hole_close_to_shell,_B_coincident_with_A=intersection|MULTIPOLYGON (((10 10, 10 30, 10.25 30, 10 10)), ((30 10, 10 10, 30 10.25, 30 10)))|union|POLYGON ((10 30, 10 100, 100 100, 100 10, 30 10, 10 10, 10 30), (90 90, 11 90, 10.25 30, 30 30, 30 10.25, 90 11, 90 90))|difference|skipped|symdifference|MULTIPOLYGON (((10 30, 10 100, 100 100, 100 10, 30 10, 30 10.25, 90 11, 90 90, 11 90, 10.25 30, 10 30)), ((10 10, 10.25 30, 30 30, 30 10.25, 10 10)))
AA_-_B_hole_close_to_shell,_A_coincident_with_B=intersection|MULTIPOLYGON (((10 10, 10 30, 10.25 30, 10 10)), ((30 10, 10 10, 30 10.25, 30 10)))|union|POLYGON ((10 10, 10 30, 10 100, 100 100, 100 10, 30 10, 10 10), (10.25 30, 30 30, 30 10.25, 90 11, 90 90, 11 90, 10.25 30))|difference|skipped|symdifference|MULTIPOLYGON (((30 10, 30 10.25, 90 11, 90 90, 11 90, 10.25 30, 10 30, 10 100, 100 100, 100 10, 30 10)), ((10.25 30, 30 30, 30 10.25, 10 10, 10.25 30)))
AA_-_B_sliver_crossing_A_triangle_in_line_segment_with_length_<_1=intersection|POLYGON ((139.3676047864162 60.02607126144796, 139.3939393939394 60, 139 60, 139.3676047864162 60.02607126144796))|union|POLYGON ((139.3939393939394 60, 200 0, 0 0, 0 198, 139.3676047864162 60.02607126144796, 280 70, 280 60, 139.3939393939394 60))|difference|skipped|symdifference|MULTIPOLYGON (((139.3939393939394 60, 200 0, 0 0, 0 198, 139.3676047864162 60.02607126144796, 139 60, 139.3939393939394 60)), ((139.3939393939394 60, 139.3676047864162 60.02607126144796, 280 70, 280 60, 139.3939393939394 60)))
AA_-_sliver_triangles,_at_angle_to_each_other=intersection|POLYGON ((139.52808988764045 9.96629213483146, 139.5017793594306 9.9644128113879, 139 10, 139.52808988764045 9.96629213483146))|union|POLYGON ((139.5017793594306 9.9644128113879, 0 0, 0 20, 140 10, 139.52808988764045 9.96629213483146, 280 1, 280 0, 139.5017793594306 9.9644128113879))|difference|skipped|symdifference|MULTIPOLYGON (((139.5017793594306 9.9644128113879, 0 0, 0 20, 140 10, 139.52808988764045 9.96629213483146, 139 10, 139.5017793594306 9.9644128113879)), ((139.5017793594306 9.9644128113879, 139.52808988764045 9.96629213483146, 280 1, 280 0, 139.5017793594306 9.9644128113879)))
AA_-_sliver_triangle_with_multiple_intersecting_boxes=intersection|MULTIPOLYGON (((1 2, 1 2.090909090909091, 2 2.1818181818181817, 2 2, 1 2)), ((3 2, 3 2.272727272727273, 4 2.3636363636363638, 4 2, 3 2)), ((5 2, 5 2.4545454545454546, 6 2.5454545454545454, 6 2, 5 2)), ((7 2, 7 2.6363636363636362, 8 2.727272727272727, 8 2, 7 2)), ((9 2, 9 2.8181818181818183, 10 2.909090909090909, 10 2, 9 2)))|union|POLYGON ((1 2.090909090909091, 1 4, 2 4, 2 2.1818181818181817, 3 2.272727272727273, 3 4, 4 4, 4 2.3636363636363638, 5 2.4545454545454546, 5 4, 6 4, 6 2.5454545454545454, 7 2.6363636363636362, 7 4, 8 4, 8 2.727272727272727, 9 2.8181818181818183, 9 4, 10 4, 10 2.909090909090909, 11 3, 11 2, 10 2, 10 1, 9 1, 9 2, 8 2, 8 1, 7 1, 7 2, 6 2, 6 1, 5 1, 5 2, 4 2, 4 1, 3 1, 3 2, 2 2, 2 1, 1 1, 1 2, 0 2, 1 2.090909090909091))|difference|skipped|symdifference|MULTIPOLYGON (((1 2.090909090909091, 1 4, 2 4, 2 2.1818181818181817, 1 2.090909090909091)), ((1 2.090909090909091, 1 2, 0 2, 1 2.090909090909091)), ((2 2, 2 1, 1 1, 1 2, 2 2)), ((2 2, 2 2.1818181818181817, 3 2.272727272727273, 3 2, 2 2)), ((3 2.272727272727273, 3 4, 4 4, 4 2.3636363636363638, 3 2.272727272727273)), ((4 2, 4 1, 3 1, 3 2, 4 2)), ((4 2, 4 2.3636363636363638, 5 2.4545454545454546, 5 2, 4 2)), ((5 2.4545454545454546, 5 4, 6 4, 6 2.5454545454545454, 5 2.4545454545454546)), ((6 2, 6 1, 5 1, 5 2, 6 2)), ((6 2, 6 2.5454545454545454, 7 2.6363636363636362, 7 2, 6 2)), ((7 2.6363636363636362, 7 4, 8 4, 8 2.727272727272727, 7 2.6363636363636362)), ((8 2, 8 1, 7 1, 7 2, 8 2)), ((8 2, 8 2.727272727272727, 9 2.8181818181818183, 9 2, 8 2)), ((9 2.8181818181818183, 9 4, 10 4, 10 2.909090909090909, 9 2.8181818181818183)), ((10 2, 10 1, 9 1, 9 2, 10 2)), ((10 2, 10 2.909090909090909, 11 3, 11 2, 10 2)))
AA_-_Polygon_with_hole_with_outward_sliver,_cut_by_polygon=intersection|MULTIPOLYGON (((180 160, 180 120, 160 120, 160 160, 180 160)), ((180 120, 180 80, 160 80, 160 119.66666666666667, 180 120)))|union|POLYGON ((20 40, 20 200, 180 200, 180 160, 200 160, 200 80, 180 80, 180 40, 20 40), (160 120, 120 120, 120 160, 60 120, 120 80, 120 119, 160 119.66666666666667, 160 120))|difference|skipped|symdifference|MULTIPOLYGON (((20 40, 20 200, 180 200, 180 160, 160 160, 160 120, 120 120, 120 160, 60 120, 120 80, 120 119, 160 119.66666666666667, 160 80, 180 80, 180 40, 20 40)), ((180 120, 180 160, 200 160, 200 80, 180 80, 180 120)), ((160 120, 180 120, 160 119.66666666666667, 160 120)))
AA_-_Polygon_with_hole_with_outward_sliver,_cut_by_line=intersection|MULTILINESTRING ((160 140, 160 120), (160 119.66666666666667, 160 100))|union|GEOMETRYCOLLECTION(POLYGON((20.0 40.0, 20.0 200.0, 180.0 200.0, 180.0 120.0, 180.0 40.0, 20.0 40.0), (180.0 120.0, 160.0 120.0, 120.0 120.0, 120.0 160.0, 60.0 120.0, 120.0 80.0, 120.0 119.0, 160.0 119.66666666666667, 180.0 120.0)), LINESTRING(160.0 120.0, 160.0 119.66666666666667)))|difference|POLYGON((20.0 40.0, 20.0 200.0, 180.0 200.0, 180.0 120.0, 180.0 40.0, 20.0 40.0), (180.0 120.0, 160.0 120.0, 120.0 120.0, 120.0 160.0, 60.0 120.0, 120.0 80.0, 120.0 119.0, 160.0 119.66666666666667, 180.0 120.0))|symdifference|GEOMETRYCOLLECTION(POLYGON((20.0 40.0, 20.0 200.0, 180.0 200.0, 180.0 120.0, 180.0 40.0, 20.0 40.0), (180.0 120.0, 160.0 120.0, 120.0 120.0, 120.0 160.0, 60.0 120.0, 120.0 80.0, 120.0 119.0, 160.0 119.66666666666667, 180.0 120.0)), LINESTRING(160.0 120.0, 160.0 119.66666666666667))
AA_-_Polygon_with_inward_sliver_touching_hole,_cut_by_polygon=intersection|MULTIPOLYGON (((180 160, 180 120, 150 120, 150 160, 180 160)), ((150 119.75, 180 119, 180 80, 150 80, 150 119.75)))|union|POLYGON((20.0 40.0, 20.0 200.0, 180.0 200.0, 180.0 160.0, 200.0 160.0, 200.0 80.0, 180.0 80.0, 180.0 40.0, 20.0 40.0), (150.0 120.0, 140.0 120.0, 150.0 119.75, 150.0 120.0), (140.0 120.0, 140.0 160.0, 80.0 120.0, 140.0 80.0, 140.0 120.0))|difference|POLYGON((20.0 40.0, 20.0 200.0, 180.0 200.0, 180.0 160.0, 150.0 160.0, 150.0 120.0, 140.0 120.0, 150.0 119.75, 150.0 80.0, 180.0 80.0, 180.0 40.0, 20.0 40.0), (140.0 120.0, 140.0 160.0, 80.0 120.0, 140.0 80.0, 140.0 120.0))|symdifference|MULTIPOLYGON(((150.0 120.0, 180.0 120.0, 180.0 160.0, 200.0 160.0, 200.0 80.0, 180.0 80.0, 180.0 119.0, 150.0 119.75, 150.0 120.0)), ((20.0 40.0, 20.0 200.0, 180.0 200.0, 180.0 160.0, 150.0 160.0, 150.0 120.0, 140.0 120.0, 150.0 119.75, 150.0 80.0, 180.0 80.0, 180.0 40.0, 20.0 40.0), (140.0 120.0, 140.0 160.0, 80.0 120.0, 140.0 80.0, 140.0 120.0)))
# the following getboundary check needs to convert a multipolygon to a boundary first,
# also the expected results for some operations are incorrect.
AA_-_intersecting_slivers,_dimensional_collapse=getboundary|boundary|intersection|POLYGON ((82.6473835931011 39.195974006938, 82.63884309660992 39.34604273099711, 82.7417188240485 39.35371692840684, 82.74795873465995 39.200215127365176, 82.6473835931011 39.195974006938))|difference|skipped|symdifference|MULTIPOLYGON (((83 33, 82.6473835931011 39.195974006938, 82.74795873465995 39.200215127365176, 83 33)), ((82.63884309660992 39.34604273099711, 82.6473835931011 39.195974006938, 78 39, 82.63884309660992 39.34604273099711)), ((82.63884309660992 39.34604273099711, 62 402, 68 402, 82.7417188240485 39.35371692840684, 82.63884309660992 39.34604273099711)), ((82.74795873465995 39.200215127365176, 82.7417188240485 39.35371692840684, 574 76, 576 60, 82.74795873465995 39.200215127365176)))|union|POLYGON ((83 33, 82.6473835931011 39.195974006938, 78 39, 82.63884309660992 39.34604273099711, 62 402, 68 402, 82.7417188240485 39.35371692840684, 574 76, 576 60, 82.74795873465995 39.200215127365176, 83 33))
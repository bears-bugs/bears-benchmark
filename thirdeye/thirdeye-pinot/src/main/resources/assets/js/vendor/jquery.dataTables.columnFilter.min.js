(function(a){a.fn.columnFilter=function(G){function C(a,c,b,e,f){if("undefined"==typeof c)return[];"undefined"==typeof b&&(b=!0);"undefined"==typeof e&&(e=!0);"undefined"==typeof f&&(f=!0);a=1==e?a.aiDisplay:a.aiDisplayMaster;e=[];for(var z=0,d=a.length;z<d;z++){var n=g.fnGetData(a[z])[c];if(1!=f||0!=n.length)1==b&&-1<jQuery.inArray(n,e)||e.push(n)}return e.sort()}function r(a){return t.bUseColVis?a:g.fnSettings().oApi._fnVisibleToColumnIndex(g.fnSettings(),a)}function D(h,c,b,e,f,z){var d="text_filter form-control";
    e&&(d="number_filter form-control");w=w.replace(/(^\s*)|(\s*$)/g,"");var n=h.fnSettings().aoPreSearchCols[l].sSearch,g="search_init ",v=w;""!=n&&"^"!=n&&(v=e&&"^"==n.charAt(0)?n.substr(1):n,g="");d=a('<input type="text" class="'+g+d+'" value="'+v+'" rel="'+l+'"/>');void 0!=z&&-1!=z&&d.attr("maxlength",z);m.html(d);e?m.wrapInner('<span class="filter_column filter_number" />'):m.wrapInner('<span class="filter_column filter_text" />');A[l]=w;var q=l;e&&!h.fnSettings().oFeatures.bServerSide?d.keyup(function(){h.fnFilter("^"+
        this.value,r(q),!0,!1);x()}):d.keyup(function(){if(h.fnSettings().oFeatures.bServerSide&&0!=f){h.fnSettings();var d=a(this).data("dt-iLastFilterLength");"undefined"==typeof d&&(d=0);var e=this.value.length;if(Math.abs(e-d)<f)return;a(this).data("dt-iLastFilterLength",e)}h.fnFilter(this.value,r(q),c,b);x()});d.focus(function(){a(this).hasClass("search_init")&&(a(this).removeClass("search_init"),this.value="")});d.blur(function(){""==this.value&&(a(this).addClass("search_init"),this.value=A[q])})}function H(h){m.html(B(0));
    var c=h.attr("id")+"_range_from_"+l,b=a('<input type="text" class="number_range_filter form-control" id="'+c+'" rel="'+l+'"/>');m.append(b);m.append(B(1));var e=h.attr("id")+"_range_to_"+l,b=a('<input type="text" class="number_range_filter form-control" id="'+e+'" rel="'+l+'"/>');m.append(b);m.append(B(2));m.wrapInner('<span class="filter_column filter_number_range form-control" />');var f=l;y.push(l);h.dataTableExt.afnFiltering.push(function(a,d,b){if(h.attr("id")!=a.sTableId||null==document.getElementById(c))return!0;
        a=1*document.getElementById(c).value;b=1*document.getElementById(e).value;d="-"==d[r(f)]?0:1*d[r(f)];return""==a&&""==b||""==a&&d<=b||a<=d&&""==b||a<=d&&d<=b?!0:!1});a("#"+c+",#"+e,m).keyup(function(){var a=1*document.getElementById(c).value,b=1*document.getElementById(e).value;0!=a&&0!=b&&a>b||(h.fnDraw(),x())})}function I(h){var c=u.split(/[}{]/);m.html("");var b=h.attr("id")+"_range_from_"+l,e=a('<input type="text" class="date_range_filter form-control" id="'+b+'" rel="'+l+'"/>');e.datepicker();
    var f=h.attr("id")+"_range_to_"+l,g=a('<input type="text" class="date_range_filter form-control" id="'+f+'" rel="'+l+'"/>');for(ti=0;ti<c.length;ti++)c[ti]==t.sDateFromToken?m.append(e):c[ti]==t.sDateToToken?m.append(g):m.append(c[ti]);m.wrapInner('<span class="filter_column filter_date_range" />');g.datepicker();var d=l;y.push(l);h.dataTableExt.afnFiltering.push(function(b,c,f){if(h.attr("id")!=b.sTableId)return!0;b=e.datepicker("getDate");f=g.datepicker("getDate");if(null==b&&null==f)return!0;var l=
        null;try{if(null==c[r(d)]||""==c[r(d)])return!1;l=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,c[r(d)])}catch(m){return!1}return null==l?!1:null==b&&l<=f||b<=l&&null==f||b<=l&&l<=f?!0:!1});a("#"+b+",#"+f,m).change(function(){h.fnDraw();x()})}function E(h,c,b,e,f,g,d,m){null==c&&(c=C(h.fnSettings(),b,!0,!1,!0));var p=h.fnSettings().aoPreSearchCols[l].sSearch;if(null==p||""==p)p=d;f='<select class="search_init select_filter form-control" rel="'+l+'"><option value="" class="search_init">'+
    f+"</option>";m&&(f='<select class="search_init select_filter form-control" rel="'+l+'" multiple>');d=0;var v=c.length;for(d=0;d<v;d++)if("object"!=typeof c[d]){var q="";if(escape(c[d])==p||escape(c[d])==escape(p))q="selected ";f+="<option "+q+' value="'+escape(c[d])+'">'+c[d]+"</option>"}else q="",g?(c[d].value==p&&(q="selected "),f+="<option "+q+'value="'+c[d].value+'">'+c[d].label+"</option>"):(escape(c[d].value)==p&&(q="selected "),f+="<option "+q+'value="'+escape(c[d].value)+'">'+c[d].label+
    "</option>");c=a(f+"</select>");e.html(c);e.wrapInner('<span class="filter_column filter_select" />');m?c.change(function(){""!=a(this).val()?a(this).removeClass("search_init"):a(this).addClass("search_init");var c=a(this).val(),d=[];null==c||c==[]?c="^(.*)$":(a.each(c,function(a,b){d.push(b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))}),c="^("+d.join("|")+")$");h.fnFilter(c,b,!0,!1)}):(c.change(function(){""!=a(this).val()?a(this).removeClass("search_init"):a(this).addClass("search_init");g?h.fnFilter(a(this).val(),
    b,g):h.fnFilter(unescape(a(this).val()),b);x()}),null!=p&&""!=p&&h.fnFilter(unescape(p),b))}function J(a,c,b,e,f){var g=a.fnSettings();null!=c&&"function"!=typeof c||""==g.sAjaxSource||g.oFeatures.bServerSide||g.aoDrawCallback.push({fn:function(d,g,l){return function(m){if(2==m.iDraw&&null!=m.sAjaxSource&&""!=m.sAjaxSource&&!m.oFeatures.bServerSide)return E(a,c&&c(m.aoData,m),r(d),g,l,b,e,f)}}(l,m,w),sName:"column_filter_"+l});E(a,"function"==typeof c?null:c,r(l),m,w,b,e,f)}function K(h){var c=l,
    b='<div class="dropdown select_filter form-control"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+w+'<b class="caret"></b></a><ul class="dropdown-menu" role="menu"><li data-value=""><a>Show All</a></li>',e,f=h.length;for(e=0;e<f;e++)b+='<li data-value="'+h[e]+'"><a>'+h[e]+"</a></li>";h=a(b+"</ul></div>");m.html(h);m.wrapInner('<span class="filterColumn filter_select" />');h.find("li").click(function(){g.fnFilter(a(this).data("value"),c)})}function L(h,c){null==c&&(c=C(h.fnSettings(),
    l,!0,!0,!0));var b=l,e="",f,g=c.length,d=w.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("\u00a3","STERL").replace("@","AT").replace(/\s/g,"_"),d=d.replace(/[^a-zA-Z 0-9]+/g,"");f=w;if(null!=t.sFilterButtonText||void 0!=t.sFilterButtonText)f=t.sFilterButtonText;var n=Math.floor(g/12);0<g%12&&(n+=1);var p=100/n-2,v=10*n;1==n&&(p=20);var n='<div style="float:left; min-width: '+p+'%; " >',p=h.attr("id")+d,q="chkBtnOpen"+p,r=p+"-flt-toggle",e=e+('<button id="'+q+'" class="checkbox_filter btn btn-default" > '+
    f+"</button>")+('<div id="'+r+'" title="'+w+'" rel="'+l+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+v+'%; " >'),e=e+n;for(f=0;f<g;f++){0==f%12&&0!=f&&(e+="</div>"+n);var v=c[f],u=c[f];"object"==typeof c[f]&&(v=c[f].label,u=c[f].value);e+='<input class="search_init checkbox_filter btn btn-default" type="checkbox" id= "'+p+"_cb_"+u+'" name= "'+d+'" value="'+u+'" >'+v+"<br/>";v=a(e);m.html(v);m.wrapInner('<span class="filter_column filter_checkbox" />');v.change(function(){var c=
    "",e="|",f=a('input:checkbox[name="'+d+'"]:checked').size();a('input:checkbox[name="'+d+'"]:checked').each(function(b){if(0==b&&1==f||0!=b&&b==f-1)e="";c=c.replace(/^\s+|\s+$/g,"");c=c+a(this).val()+e;e="|"});""!=c?a('input:checkbox[name="'+d+'"]').removeClass("search_init"):a('input:checkbox[name="'+d+'"]').addClass("search_init");h.fnFilter(c,b,!0,!1);x()})}a("#"+q).button();a("#"+r).dialog({autoOpen:!1,hide:"blind",buttons:[{text:"Reset",click:function(){a('input:checkbox[name="'+d+'"]:checked').each(function(b){a(this).attr("checked",
    !1);a(this).addClass("search_init")});h.fnFilter("",b,!0,!1);x();return!1}},{text:"Close",click:function(){a(this).dialog("close")}}]});a("#"+q).click(function(){a("#"+r).dialog("open");var b=a(this);a("#"+r).dialog("widget").position({my:"top",at:"bottom",of:b});return!1});var y=x;x=function(){var b=a("#"+q);a("#"+r).dialog("widget").position({my:"top",at:"bottom",of:b});y()}}function B(a){switch(a){case 0:return u.substring(0,u.indexOf("{from}"));case 1:return u.substring(u.indexOf("{from}")+6,
    u.indexOf("{to}"));default:return u.substring(u.indexOf("{to}")+4)}}var A,l,w,m,u="From {from} to {to}",F=[],y=[],x=function(){},g=this,t=a.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}",sDateFromToken:"from",sDateToToken:"to"},G);return this.each(function(){if(g.fnSettings().oFeatures.bFilter){A=[];var h=g.fnSettings().aoFooter[0];g.fnSettings();"head:after"==t.sPlaceHolder?(h=a("tr:first",g.fnSettings().nTHead).detach(),g.fnSettings().bSortCellsTop?
    (h.prependTo(a(g.fnSettings().nTHead)),h=g.fnSettings().aoHeader[1]):(h.appendTo(a(g.fnSettings().nTHead)),h=g.fnSettings().aoHeader[0]),g.fnSettings()):"head:before"==t.sPlaceHolder&&(g.fnSettings().bSortCellsTop?(h=a("tr:first",g.fnSettings().nTHead).detach(),h.appendTo(a(g.fnSettings().nTHead)),h=g.fnSettings().aoHeader[1]):h=g.fnSettings().aoHeader[0],g.fnSettings());a(h).each(function(b){l=b;b={type:"text",bRegex:!1,bSmart:!0,iMaxLenght:-1,iFilterLength:0};if(null!=t.aoColumns){if(t.aoColumns.length<
    l||null==t.aoColumns[l])return;b=t.aoColumns[l]}w=a(a(this)[0].cell).text();null==b.sSelector?m=a(a(this)[0].cell):(m=a(b.sSelector),0==m.length&&(m=a(a(this)[0].cell)));if(null!=b)switch(u=null!=b.sRangeFormat?b.sRangeFormat:t.sRangeFormat,b.type){case "null":break;case "number":D(g,!0,!1,!0,b.iFilterLength,b.iMaxLenght);break;case "select":1!=b.bRegex&&(b.bRegex=!1);J(g,b.values,b.bRegex,b.selected,b.multiple);break;case "number-range":H(g);break;case "date-range":I(g);break;case "checkbox":L(g,
    b.values);break;case "twitter-dropdown":case "dropdown":K(b.values);break;default:bRegex=null==b.bRegex?!1:b.bRegex,bSmart=null==b.bSmart?!1:b.bSmart,D(g,bRegex,bSmart,!1,b.iFilterLength,b.iMaxLenght)}});for(j=0;j<y.length;j++)F.push(function(){var b=g.attr("id");return a("#"+b+"_range_from_"+y[j]).val()+t.sRangeSeparator+a("#"+b+"_range_to_"+y[j]).val()});if(g.fnSettings().oFeatures.bServerSide){var c=g.fnSettings().fnServerData;g.fnSettings().fnServerData=function(b,e,f){for(j=0;j<y.length;j++){var h=
    y[j];for(k=0;k<e.length;k++)e[k].name=="sSearch_"+h&&(e[k].value=F[j]())}e.push({name:"sRangeSeparator",value:t.sRangeSeparator});if(null!=c)try{c(b,e,f,g.fnSettings())}catch(d){c(b,e,f)}else a.getJSON(b,e,function(a){f(a)})}}}})}})(jQuery);
<!DOCTYPE html>
<html lang="en-us">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <meta name="author" content="" />

  

  

  <meta name="generator" content="Hugo 0.26" />

  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

  
  <link href="http://cassandra-reaper.io/css/animate.css" rel="stylesheet">

  
  
    <link href="http://cassandra-reaper.io/css/style.default.css" rel="stylesheet" id="theme-stylesheet">
  


  
  <link href="http://cassandra-reaper.io/css/custom.css" rel="stylesheet">

  
  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
  <link rel="shortcut icon" href="http://cassandra-reaper.io/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="http://cassandra-reaper.io/img/apple-touch-icon.png" />
  

  <link href="http://cassandra-reaper.io/css/owl.carousel.css" rel="stylesheet">
  <link href="http://cassandra-reaper.io/css/owl.theme.css" rel="stylesheet">

  <link rel="alternate" href="http://cassandra-reaper.io/index.xml" type="application/rss+xml" title="Reaper: Easy Repair Management for Apache Cassandra">

  
  <meta property="og:title" content="" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/docs/install/docker//" />
  <meta property="og:image" content="" />

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="http://cassandra-reaper.io/">
                    <img src="http://cassandra-reaper.io/img/logo.png" alt=" logo" class="hidden-xs hidden-sm">
                    <img src="http://cassandra-reaper.io/img/logo-small.png" alt=" logo" class="visible-xs visible-sm">
                    <span class="sr-only"> - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fa fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  
                  <li class="dropdown">
                    
                    <a href="/docs/">Documentation</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/docs/install/">Downloads</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="/faq/">FAQ</a>
                    
                  </li>
                  
                  <li class="dropdown">
                    
                    <a href="https://github.com/thelastpickle/cassandra-reaper">View on GitHub</a>
                    
                  </li>
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1></h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">

            

            <div class="container">
                <div class="row">
                    <div class="col-md-3">
                        <ul class="sidebar-menu">
    
    
    

    <li class="sub-menu">
    <a href="/docs/install/" class="">
        
        <span>Download and Install</span>
        <span class="menu-arrow arrow_carrot-right"></span>
    </a>
    <ul class="sub">
        
        <li><a href="/docs/install/packages/"> Pre built packages </a> </li>
        
        <li><a href="/docs/install/building/"> Building from Source </a> </li>
        
        <li><a href="/docs/install/docker/"> Docker </a> </li>
        
    </ul>
    
    </li>
    
    

    <li class="sub-menu">
    <a href="/docs/backends/" class="">
        
        <span>Backends</span>
        <span class="menu-arrow arrow_carrot-right"></span>
    </a>
    <ul class="sub">
        
        <li><a href="/docs/backends/memory/"> In Memory </a> </li>
        
        <li><a href="/docs/backends/h2/"> H2 (Local Storage) </a> </li>
        
        <li><a href="/docs/backends/postgres/"> Postgres </a> </li>
        
        <li><a href="/docs/backends/cassandra/"> Cassandra </a> </li>
        
    </ul>
    
    </li>
    
    
    <li>
        <a href="/docs/configuration/">
            
            <span>Configuration Reference</span>
        </a>
        
    </li>
    
    
    <li>
        <a href="/docs/api/">
            
            <span>Rest API</span>
        </a>
        
    </li>
    
    
    <li>
        <a href="/docs/community/">
            
            <span>Community</span>
        </a>
        
    </li>
    
</ul>
                    </div>

                    <div class="col-md-9">
                        <div>
                          

<h1 id="docker">Docker</h1>

<p><a href="https://docs.docker.com/engine/installation/">Docker</a> and <a href="https://docs.docker.com/compose/install/">Docker Compose</a> will need to be installed in order to use the commands in this section.</p>

<h2 id="building-reaper-packages-with-docker">Building Reaper Packages with Docker</h2>

<p>Building Reaper packages requires quite a few dependencies, especially when making changes to the web interface code. In an effort to simplify the build process, Dockerfiles have been created that implement the build actions required to package Reaper.</p>

<p>To build the JAR and other packages which are then placed in the <em>packages</em> directory run the following commands from the top level directory:</p>

<pre><code class="language-bash">cd src/packaging
docker-compose build reaper-build-packages &amp;&amp; docker-compose run reaper-build-packages
</code></pre>

<h2 id="building-reaper-docker-image">Building Reaper Docker Image</h2>

<p>To build the Reaper Docker Image which is then added to the local image cache using the <code>cassandra-reaper:latest</code> tag, run the following commands from the top level directory:</p>

<pre><code class="language-bash">cd src/server
mvn package docker:build
</code></pre>

<p>Note that the above command will build the Reaper JAR and place it in the <em>src/server/target</em> directory prior to creating the Docker Image. It is also possible to build the JAR file using the <a href="building-reaper-packages-with-docker">Docker package build</a> instructions and omitting the <code>package</code> command from the above Maven commands.</p>

<h1 id="start-docker-environment">Start Docker Environment</h1>

<p>The <code>docker-compose</code> services available allow for orchestration of an environment that uses default settings. In addition, services are provided that allow orchestration of an environment in which the connections between the services are SSL encrypted. Services which use SSL encryption contain a <code>-ssl</code> suffix in their name.</p>

<h2 id="default-settings-environment">Default Settings Environment</h2>

<p>From the top level directory change to the <em>src/packaging</em> directory:</p>

<pre><code class="language-bash">cd src/packaging
</code></pre>

<p>Start the Cassandra cluster:</p>

<pre><code class="language-bash">docker-compose up cassandra
</code></pre>

<p>The <code>nodetool</code> Docker Compose service can be used to check on the Cassandra node&rsquo;s status:</p>

<pre><code class="language-bash">docker-compose run nodetool status
</code></pre>

<p>Once the Cassandra node is online and accepting CQL connections, create the required <code>reaper_db</code> Cassandra keyspace to allow Reaper to save its cluster and scheduling data.</p>

<p>By default, the <code>reaper_db</code> keyspace is created using a replication factor of 1. To change this replication factor, provide the intended replication factor as an optional argument:</p>

<pre><code class="language-bash">docker-compose run cqlsh-initialize-reaper_db [$REPLICATION_FACTOR]
</code></pre>

<p>Wait a few moments for the <code>reaper_db</code> schema change to propagate, then start Reaper:</p>

<pre><code class="language-bash">docker-compose up reaper
</code></pre>

<h2 id="ssl-encrypted-connections-environment">SSL Encrypted Connections Environment</h2>

<p>From the top level directory change to the <em>src/packaging</em> directory:</p>

<pre><code class="language-bash">cd src/packaging
</code></pre>

<p>Generate the SSL Keystore and Truststore which will be used to encrypt the connections between Reaper and Cassandra.</p>

<pre><code class="language-bash">docker-compose run generate-ssl-stores
</code></pre>

<p>Start the Cassandra cluster which encrypts both the JMX and Native Protocol:</p>

<pre><code class="language-bash">docker-compose up cassandra-ssl
</code></pre>

<p>The <code>nodetool-ssl</code> Docker Compose service can be used to check on the Cassandra node&rsquo;s status:</p>

<pre><code class="language-bash">docker-compose run nodetool-ssl status
</code></pre>

<p>Once the Cassandra node is online and accepting encrypted SSL connections via the Native Transport protocol, create the required <code>reaper_db</code> Cassandra keyspace to allow Reaper to save its cluster and scheduling data.</p>

<p>By default, the <code>reaper_db</code> keyspace is created using a replication factor of 1. To change this replication factor, provide the intended replication factor as an optional argument:</p>

<pre><code class="language-bash">docker-compose run cqlsh-initialize-reaper_db-ssl [$REPLICATION_FACTOR]
</code></pre>

<p>Wait a few moments for the <code>reaper_db</code> schema change to propagate, then start the Reaper service that will establish encrypted connections to Cassandra:</p>

<pre><code class="language-bash">docker-compose up reaper-ssl
</code></pre>

<h2 id="access-the-environment">Access The Environment</h2>

<p>Once started, the UI can be accessed through:</p>

<p><a href="http://127.0.0.1:8080/webui/">http://127.0.0.1:8080/webui/</a></p>

<p>When adding the Cassandra node to the Reaper UI, use the IP address found via:</p>

<pre><code class="language-bash">docker-compose run nodetool status
</code></pre>

<p>The helper <code>cqlsh</code> Docker Compose service has also been included for both the default and SSL encrypted environments:</p>

<h2 id="default-environment">Default Environment</h2>

<pre><code class="language-bash">docker-compose run cqlsh
</code></pre>

<h2 id="ssl-encrypted-environment">SSL Encrypted Environment</h2>

<pre><code class="language-bash">docker-compose run cqlsh-ssl
</code></pre>

<h2 id="destroying-the-docker-environment">Destroying the Docker Environment</h2>

<p>When terminating the infrastructure, use the following command to stop
all related Docker Compose services:</p>

<pre><code class="language-bash">docker-compose down
</code></pre>

<p>To completely clean up all persistent data, delete the <code>./data/</code> directory:</p>

<pre><code class="language-bash">rm -rf ./data/
</code></pre>

                        </div>

                    </div>

                </div>
                

            </div>
            

            
        </div>
        

        <footer id="footer">
    <div class="container">

        

        <div class="col-md-4 col-sm-6">

            

        </div>
        

        

    </div>
    
</footer>







<div id="copyright">
    <div class="container">
        <div class="col-md-12">
            
            <p class="pull-right">
              Template by <a href="http://bootstrapious.com/free-templates">Bootstrapious</a>.
              

              Ported to Hugo by <a href="https://github.com/devcows/hugo-universal-theme">DevCows</a>
            </p>
        </div>
    </div>
</div>





    </div>
    

    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-104925477-1', 'auto');
ga('send', 'pageview');
</script>

<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="//maps.googleapis.com/maps/api/js?v=3.exp"></script>

<script src="http://cassandra-reaper.io/js/hpneo.gmaps.js"></script>
<script src="http://cassandra-reaper.io/js/gmaps.init.js"></script>
<script src="http://cassandra-reaper.io/js/front.js"></script>


<script src="http://cassandra-reaper.io/js/owl.carousel.min.js"></script>


  </body>
</html>
